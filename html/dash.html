<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>

    <title>Dashboard</title>

   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>


    <!-- Custom styles for this template -->
    <link href="../css/carousel.css" rel="stylesheet">
  </head>
<!-- NAVBAR
================================================== -->
  <body>
      
<!--    <div class="navbar-wrapper">-->
      <div class="container-fullwidth">
        <nav class="navbar navbar-default" style="background-color:white; border-color:
                                                  transparent; padding-top: 10px;
                                                  text-color: gray;">
            <div class="container">
                <div class="capitalone_logo">
                    <a class="default-logo">
                        <img src = "https://upload.wikimedia.org/wikipedia/en/9/98/Capital_One_logo.svg" style="width: 14%; padding-right:40px;">
                    </a>
                    <a class="nav-link active" href="#" style="padding-right:30px; color: gray;font-family: open sans;">Personal</a>
                    <a class="nav-link" href="#" style="padding-right:30px; color: gray;font-family: open sans;">Business</a>
                    <a class="nav-link" href="#" style="padding-right:30px; color: gray;font-family: open sans;">Commercial</a>
                    
                </div>
            </div>
        </nav>
        </div>
          <div class="container-fullwidth" style="background-color:#303E4E;">
          <nav>
                <div class="container" style="height: 45px; background-color:#303E4E; padding-top: 13px;">
                    <a class="nav-link active" href="#" style="padding-right:30px; color: white; padding-left:20px; font-family: open sans;">Credit Cards</a>
                    <a class="nav-link active" href="#" style="padding-right:30px; color: white;font-family: open sans; ">Bank</a>
                    <a class="nav-link active" href="#" style="padding-right:30px; color: white;font-family: open sans; ">Borrow</a>
                    <a class="nav-link active" href="#" style="padding-right:30px; color: white;font-family: open sans; ">Invest</a>
                    <a class="nav-link active" href="#" style="padding-right:30px; color: white;font-family: open sans; ;">Learn</a>
                    <a class="nav-link active" href="#" style="padding-right:30px; color: white; font-family: open sans;">Contact</a>
                    
              </div>
          </nav>
          </div>
          
<!--
          <nav class="navbar navbar-inverse navbar-static-top">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="#">Project name</a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
              <ul class="nav navbar-nav">
                <li class="active"><a href="#">Home</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#contact">Contact</a></li>
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Dropdown <span class="caret"></span></a>
                  <ul class="dropdown-menu">
                    <li><a href="#">Action</a></li>
                    <li><a href="#">Another action</a></li>
                    <li><a href="#">Something else here</a></li>
                    <li role="separator" class="divider"></li>
                    <li class="dropdown-header">Nav header</li>
                    <li><a href="#">Separated link</a></li>
                    <li><a href="#">One more separated link</a></li>
                  </ul>
                </li>
              </ul>
            </div>
          </div>
        </nav>
-->

      </div>
<!--    </div>-->


    <!-- Carousel
    ================================================== -->
    <div id="myCarousel" class="carousel slide" data-ride="carousel" data-interval="10000">
      <!-- Indicators -->
     
      <div class="carousel-inner" role="listbox" >
        <div class="item active">
          <img class="first-slide" src="http://www.drodd.com/images14/blue21.jpg" style="overflow: hidden; height:740px; z-index:-1;" alt="First slide">
          <div class="container" >
                  <p style="padding-left:20px; padding-top:20px; font-family:open sans; font-size:32pt; color:white;" align=center>Giving for Good Dashboard</p>
                <p style="padding-left:20px; padding-top:20px; font-family:open sans; font-size:16pt; color:white;" align=center>Your Total Giving for Good Contribution:</p>
                <p style="padding-left:20px; padding-top:20px; font-family:open sans; font-size:100pt; color:white;" align=center>$347</p>
              
              
              <p style="font-family:open sans; color:white; font-size:14pt; margin-left:900px;">Your Personal Goal: $1000</p>
              <div class="progress" style="height:70px;">
                <div class="progress-bar progress-bar-warning" role="progressbar" style="width:36%">
                    <p style="margin-left:20px; margin-top:22px; font-family:open sans; font-size:18pt; color:black;">35%</p>
<!--                <p style="font-family:open sans; font-size:32pt; margin-top:35px; color:black;">$0 - $100</p>-->
                </div>
                
            </div>
               
          </div>
        </div>
      </div>
   
    </div><!-- /.carousel -->


      
      
    <!-- Marketing messaging and featurettes
    ================================================== -->
    <!-- Wrap the rest of the page in another container to center all the content. -->

    <div class="container marketing">

        <div class="container">
        <h1 style="font-family:open sans; color:black; font-size:32pt; margin-bottom: 40px; 
                   margin-top:-15px;" align=center >Your Top Contributions</h1>
        </div>
        
      <!-- Three columns of text below the carousel -->
      <div class="row">
        <div class="col-lg-4">
          <img class="img-circle" src="http://www.logopopanswers.com/wp-content/uploads/2015/05/68-UNICEF-300x200.jpg"  height="160" overflow="hidden">
          <h2 style="font-family:open sans; color:black; font-size:28pt;">UNICEF</h2>
          <p style="font-family:open sans; color:black; font-size:12pt;">$77</p>
          
        </div><!-- /.col-lg-4 -->
          
        <div class="col-lg-4">
          <img class="img-circle" src="http://indyambassadors.org/wp-content/uploads/2016/05/american-heart-association-logo-best-non-profit-logo-designs-1.png" alt="Generic placeholder image"  height="140">
          <h2 style="font-family:open sans; color:black; font-size:28pt;">American Heart Association</h2>
          <p style="font-family:open sans; color:black; font-size:12pt;">$52</p>

        </div><!-- /.col-lg-4 -->
          
        <div class="col-lg-4">
          <img class="img-circle" src="https://pbs.twimg.com/profile_images/750311055973285888/3mAMLxtC.jpg" alt="Generic placeholder image" width="140" height="140">
          <h2 style="font-family:open sans; color:black; font-size:28pt;">National Park Foundation</h2>
          <p style="font-family:open sans; color:black; font-size:12pt;">$36</p>
         
        </div><!-- /.col-lg-4 -->
      </div><!-- /.row -->

    

      <!-- START THE FEATURETTES -->

      <hr class="featurette-divider">

    <div class="container">
        <h1 style="font-family:open sans; color:black; font-size:32pt; " align=center>Giving for Good Transactions</h1>
        </div>
        
     <table class="table table-striped" style="font-family:open sans; font-size:12pt; color:black;">
    <thead>
      <tr>
        <th>Date</th>
        <th>Organization</th>
        <th>Amount</th>
      </tr>
    </thead>
    <tbody id="hist">
     
    </tbody>
  </table>
      <p style="text-align:center; "><a class="btn btn-lg btn-primary" href="#" role="button" style="align:center; background-color:#0D74AF; font-family: open sans;">View All Past Transactions</a></p>
    </div><!-- /.container -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script type="text/javascript">
    var tbody = document.querySelector('#hist');
    var requestURL = 'http://127.0.0.1:3000/donations?customerId=56c66be5a73e492741507278';
    var request = new XMLHttpRequest();
    request.open('GET', requestURL);
    request.responseType = 'json';
    request.send();
    console.log('after sent');
    
    request.onload = function() {
      var hist = request.response;
      showhist(hist);
    }

    'GET localhost:3000/charities?id=id'

    function showhist(jsonObj) {
      var trans = jsonObj;
      for(let donation of trans) {

        console.log(donation);
        
        var reqURL = 'http://127.0.0.1:3000/charities/' + donation.charity;
        console.log(reqURL);
        var req = new XMLHttpRequest();
        req.open('GET', reqURL);
        req.responseType = 'json';
        req.send();
        req.onload = function() {
          console.log(donation.charity);
            console.log(JSON.stringify(req.response));
          let name = req.response.name;

             var tr = document.createElement('tr');
          var date = document.createElement('td');
          var org = document.createElement('td');
          var amount = document.createElement('td');
          date.insertAdjacentHTML( 'afterbegin', Date.parse(donation.dateStart) );
          org.insertAdjacentHTML( 'afterbegin', name );
          amount.insertAdjacentHTML( 'afterbegin', '$' + donation.amount );

          tr.appendChild(date);
          tr.appendChild(org);
          tr.appendChild(amount);
          tbody.appendChild(tr);
        }

        // console.log('after second req');

          // var name = name.name;
         
        // request.onload = function() {
          
        // } // end on load

      } // end for
    } // end showhist

    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
  </body>
</html>
